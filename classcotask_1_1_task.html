<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Term Project: cotask.Task Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Term Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classcotask_1_1_task.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classcotask_1_1_task-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cotask.Task Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements multitasking with scheduling and some performance logging.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2fe3b73c0ccc2cd20a89694e336291f5" id="r_a2fe3b73c0ccc2cd20a89694e336291f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2fe3b73c0ccc2cd20a89694e336291f5">__init__</a> (self, run_fun, <a class="el" href="#ab54e069dd0b4f0a2f8e7f00c94998a10">name</a>=&quot;NoName&quot;, <a class="el" href="#aeced93c7b7d23e33de9693d278aef88b">priority</a>=0, period=None, profile=False, trace=False, shares=())</td></tr>
<tr class="memdesc:a2fe3b73c0ccc2cd20a89694e336291f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a task object so it may be run by the scheduler.  <br /></td></tr>
<tr class="separator:a2fe3b73c0ccc2cd20a89694e336291f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af60def0ed4a1bc5fec32f3cf8b8a90c8" id="r_af60def0ed4a1bc5fec32f3cf8b8a90c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af60def0ed4a1bc5fec32f3cf8b8a90c8">schedule</a> (self)</td></tr>
<tr class="memdesc:af60def0ed4a1bc5fec32f3cf8b8a90c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is called by the scheduler; it attempts to run this task.  <br /></td></tr>
<tr class="separator:af60def0ed4a1bc5fec32f3cf8b8a90c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6102bc35d7cb1ce292abc85d4ddc23e1" id="r_a6102bc35d7cb1ce292abc85d4ddc23e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6102bc35d7cb1ce292abc85d4ddc23e1">ready</a> (self)</td></tr>
<tr class="memdesc:a6102bc35d7cb1ce292abc85d4ddc23e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method checks if the task is ready to run.  <br /></td></tr>
<tr class="separator:a6102bc35d7cb1ce292abc85d4ddc23e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fcee5beb8b2fed77e5125c58ba35c26" id="r_a0fcee5beb8b2fed77e5125c58ba35c26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fcee5beb8b2fed77e5125c58ba35c26">set_period</a> (self, new_period)</td></tr>
<tr class="memdesc:a0fcee5beb8b2fed77e5125c58ba35c26"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method sets the period between runs of the task to the given number of milliseconds, or <code>None</code> if the task is triggered by calls to <code><a class="el" href="#a8066da53e82716dc9f0495b28a89b781" title="Method to set a flag so that this task indicates that it&#39;s ready to run.">go()</a></code> rather than time.  <br /></td></tr>
<tr class="separator:a0fcee5beb8b2fed77e5125c58ba35c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd4093dcd01cd1d05ace187956340cf" id="r_a0fd4093dcd01cd1d05ace187956340cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fd4093dcd01cd1d05ace187956340cf">reset_profile</a> (self)</td></tr>
<tr class="memdesc:a0fd4093dcd01cd1d05ace187956340cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method resets the variables used for execution time profiling.  <br /></td></tr>
<tr class="separator:a0fd4093dcd01cd1d05ace187956340cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51c5df87e0e707f9e3c02d9765fcbee1" id="r_a51c5df87e0e707f9e3c02d9765fcbee1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51c5df87e0e707f9e3c02d9765fcbee1">get_trace</a> (self)</td></tr>
<tr class="memdesc:a51c5df87e0e707f9e3c02d9765fcbee1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method returns a string containing the task's transition trace.  <br /></td></tr>
<tr class="separator:a51c5df87e0e707f9e3c02d9765fcbee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8066da53e82716dc9f0495b28a89b781" id="r_a8066da53e82716dc9f0495b28a89b781"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8066da53e82716dc9f0495b28a89b781">go</a> (self)</td></tr>
<tr class="memdesc:a8066da53e82716dc9f0495b28a89b781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to set a flag so that this task indicates that it's ready to run.  <br /></td></tr>
<tr class="separator:a8066da53e82716dc9f0495b28a89b781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2023e255766db032de255fd65c0b1943" id="r_a2023e255766db032de255fd65c0b1943"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2023e255766db032de255fd65c0b1943">__repr__</a> (self)</td></tr>
<tr class="memdesc:a2023e255766db032de255fd65c0b1943"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method converts the task to a string for diagnostic use.  <br /></td></tr>
<tr class="separator:a2023e255766db032de255fd65c0b1943"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab54e069dd0b4f0a2f8e7f00c94998a10" id="r_ab54e069dd0b4f0a2f8e7f00c94998a10"><td class="memItemLeft" align="right" valign="top"><a id="ab54e069dd0b4f0a2f8e7f00c94998a10" name="ab54e069dd0b4f0a2f8e7f00c94998a10"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>name</b> = name</td></tr>
<tr class="memdesc:ab54e069dd0b4f0a2f8e7f00c94998a10"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the task, hopefully a short and descriptive string. <br /></td></tr>
<tr class="separator:ab54e069dd0b4f0a2f8e7f00c94998a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeced93c7b7d23e33de9693d278aef88b" id="r_aeced93c7b7d23e33de9693d278aef88b"><td class="memItemLeft" align="right" valign="top"><a id="aeced93c7b7d23e33de9693d278aef88b" name="aeced93c7b7d23e33de9693d278aef88b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>priority</b> = int(priority)</td></tr>
<tr class="memdesc:aeced93c7b7d23e33de9693d278aef88b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The task's priority, an integer with higher numbers meaning higher priority. <br /></td></tr>
<tr class="separator:aeced93c7b7d23e33de9693d278aef88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc5c88f112f516002f67118a0ee82f44" id="r_afc5c88f112f516002f67118a0ee82f44"><td class="memItemLeft" align="right" valign="top"><a id="afc5c88f112f516002f67118a0ee82f44" name="afc5c88f112f516002f67118a0ee82f44"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>period</b> = int(period * 1000)</td></tr>
<tr class="separator:afc5c88f112f516002f67118a0ee82f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad309fae1890bffafa75e9fdb33fae600" id="r_ad309fae1890bffafa75e9fdb33fae600"><td class="memItemLeft" align="right" valign="top"><a id="ad309fae1890bffafa75e9fdb33fae600" name="ad309fae1890bffafa75e9fdb33fae600"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>go_flag</b> = False</td></tr>
<tr class="memdesc:ad309fae1890bffafa75e9fdb33fae600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag which is set true when the task is ready to be run by the scheduler. <br /></td></tr>
<tr class="separator:ad309fae1890bffafa75e9fdb33fae600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdfdd92c1e369913164c7c8b7bffd1a8" id="r_afdfdd92c1e369913164c7c8b7bffd1a8"><td class="memItemLeft" align="right" valign="top"><a id="afdfdd92c1e369913164c7c8b7bffd1a8" name="afdfdd92c1e369913164c7c8b7bffd1a8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_prof</b> = 1</td></tr>
<tr class="separator:afdfdd92c1e369913164c7c8b7bffd1a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa2e4c862de693c928e66e1cf48e218" id="r_a7aa2e4c862de693c928e66e1cf48e218"><td class="memItemLeft" align="right" valign="top"><a id="a7aa2e4c862de693c928e66e1cf48e218" name="a7aa2e4c862de693c928e66e1cf48e218"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_trace</b> = self._prev_state:</td></tr>
<tr class="separator:a7aa2e4c862de693c928e66e1cf48e218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1350809098b52002da5630f070a017e5" id="r_a1350809098b52002da5630f070a017e5"><td class="memItemLeft" align="right" valign="top"><a id="a1350809098b52002da5630f070a017e5" name="a1350809098b52002da5630f070a017e5"></a>
str&#160;</td><td class="memItemRight" valign="bottom"><b>_trace</b> = '\n'</td></tr>
<tr class="separator:a1350809098b52002da5630f070a017e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe55c37895e4f4e96c72bd905db51f9" id="r_adfe55c37895e4f4e96c72bd905db51f9"><td class="memItemLeft" align="right" valign="top"><a id="adfe55c37895e4f4e96c72bd905db51f9" name="adfe55c37895e4f4e96c72bd905db51f9"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>_tr_data</b> = item[0] / 1000000.0</td></tr>
<tr class="separator:adfe55c37895e4f4e96c72bd905db51f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a3d158e6e4971c204449c07f72e67a186" id="r_a3d158e6e4971c204449c07f72e67a186"><td class="memItemLeft" align="right" valign="top"><a id="a3d158e6e4971c204449c07f72e67a186" name="a3d158e6e4971c204449c07f72e67a186"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_run_gen</b> = run_fun(shares)</td></tr>
<tr class="separator:a3d158e6e4971c204449c07f72e67a186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa443e9f35f5dee489023afb5d5b9d091" id="r_aa443e9f35f5dee489023afb5d5b9d091"><td class="memItemLeft" align="right" valign="top"><a id="aa443e9f35f5dee489023afb5d5b9d091" name="aa443e9f35f5dee489023afb5d5b9d091"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_next_run</b> = utime.ticks_us() + self.period</td></tr>
<tr class="separator:aa443e9f35f5dee489023afb5d5b9d091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d0e9249bbce322f63ad1d2004069fac" id="r_a0d0e9249bbce322f63ad1d2004069fac"><td class="memItemLeft" align="right" valign="top"><a id="a0d0e9249bbce322f63ad1d2004069fac" name="a0d0e9249bbce322f63ad1d2004069fac"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_prof</b> = profile</td></tr>
<tr class="separator:a0d0e9249bbce322f63ad1d2004069fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a6180fe3ba22a1d1e36fe1cc34cd16" id="r_a05a6180fe3ba22a1d1e36fe1cc34cd16"><td class="memItemLeft" align="right" valign="top"><a id="a05a6180fe3ba22a1d1e36fe1cc34cd16" name="a05a6180fe3ba22a1d1e36fe1cc34cd16"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_prev_state</b> = 0</td></tr>
<tr class="separator:a05a6180fe3ba22a1d1e36fe1cc34cd16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12647eaf44c1e5c9e6083e0ce77bcb3f" id="r_a12647eaf44c1e5c9e6083e0ce77bcb3f"><td class="memItemLeft" align="right" valign="top"><a id="a12647eaf44c1e5c9e6083e0ce77bcb3f" name="a12647eaf44c1e5c9e6083e0ce77bcb3f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>_trace</b> = trace</td></tr>
<tr class="separator:a12647eaf44c1e5c9e6083e0ce77bcb3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaeeb90a6096f7d1e6458648dc84f6b7" id="r_acaeeb90a6096f7d1e6458648dc84f6b7"><td class="memItemLeft" align="right" valign="top"><a id="acaeeb90a6096f7d1e6458648dc84f6b7" name="acaeeb90a6096f7d1e6458648dc84f6b7"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>_tr_data</b> = []</td></tr>
<tr class="separator:acaeeb90a6096f7d1e6458648dc84f6b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c833294c7426f5f5b753f382d9f88d" id="r_a99c833294c7426f5f5b753f382d9f88d"><td class="memItemLeft" align="right" valign="top"><a id="a99c833294c7426f5f5b753f382d9f88d" name="a99c833294c7426f5f5b753f382d9f88d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_prev_time</b> = utime.ticks_us()</td></tr>
<tr class="separator:a99c833294c7426f5f5b753f382d9f88d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5549bd87387fee6088efba87766a6fa7" id="r_a5549bd87387fee6088efba87766a6fa7"><td class="memItemLeft" align="right" valign="top"><a id="a5549bd87387fee6088efba87766a6fa7" name="a5549bd87387fee6088efba87766a6fa7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_slowest</b></td></tr>
<tr class="separator:a5549bd87387fee6088efba87766a6fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b281cae547cbe63219a13ec6f032cb9" id="r_a9b281cae547cbe63219a13ec6f032cb9"><td class="memItemLeft" align="right" valign="top"><a id="a9b281cae547cbe63219a13ec6f032cb9" name="a9b281cae547cbe63219a13ec6f032cb9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_latest</b></td></tr>
<tr class="separator:a9b281cae547cbe63219a13ec6f032cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae190f013ce9955c05841c20f2d46e9ac" id="r_ae190f013ce9955c05841c20f2d46e9ac"><td class="memItemLeft" align="right" valign="top"><a id="ae190f013ce9955c05841c20f2d46e9ac" name="ae190f013ce9955c05841c20f2d46e9ac"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_runs</b> = 0</td></tr>
<tr class="separator:ae190f013ce9955c05841c20f2d46e9ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93a114add603ab2bb498c995fd64ecd" id="r_ac93a114add603ab2bb498c995fd64ecd"><td class="memItemLeft" align="right" valign="top"><a id="ac93a114add603ab2bb498c995fd64ecd" name="ac93a114add603ab2bb498c995fd64ecd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_run_sum</b> = 0</td></tr>
<tr class="separator:ac93a114add603ab2bb498c995fd64ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10930f344a7f5615b2fd996aa95e39aa" id="r_a10930f344a7f5615b2fd996aa95e39aa"><td class="memItemLeft" align="right" valign="top"><a id="a10930f344a7f5615b2fd996aa95e39aa" name="a10930f344a7f5615b2fd996aa95e39aa"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_late_sum</b> = 0</td></tr>
<tr class="separator:a10930f344a7f5615b2fd996aa95e39aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements multitasking with scheduling and some performance logging. </p>
<p>This class implements behavior common to tasks in a cooperative multitasking system which runs in MicroPython. The ability to be scheduled on the basis of time or an external software trigger or interrupt is implemented, state transitions can be recorded, and run times can be profiled. The user's task code must be implemented in a generator which yields the state (and the CPU) after it has run for a short and bounded period of time.</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keyword">def </span>task1_fun ():</div>
<div class="line">     <span class="stringliteral">&#39;&#39;&#39;! This function switches states repeatedly for no reason &#39;&#39;&#39;</span></div>
<div class="line">     state = 0</div>
<div class="line">     <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line">         <span class="keywordflow">if</span> state == 0:</div>
<div class="line">             state = 1</div>
<div class="line">         <span class="keywordflow">elif</span> state == 1:</div>
<div class="line">             state = 0</div>
<div class="line">         <span class="keywordflow">yield</span> (state)</div>
<div class="line"> </div>
<div class="line"> <span class="comment"># In main routine, create this task and set it to run twice per second</span></div>
<div class="line"> task1 = <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a> (task1_fun, name = <span class="stringliteral">&#39;Task 1&#39;</span>, priority = 1, </div>
<div class="line">                      period = 500, profile = <span class="keyword">True</span>, trace = <span class="keyword">True</span>)</div>
<div class="line"> </div>
<div class="line"> <span class="comment"># Add the task to the list (so it will be run) and run scheduler</span></div>
<div class="line"> cotask.task_list.append (task1)</div>
<div class="line"> <span class="keywordflow">while</span> <span class="keyword">True</span>: </div>
<div class="line">     cotask.task_list.pri_sched ()</div>
<div class="ttc" id="aclasscotask_1_1_task_html"><div class="ttname"><a href="classcotask_1_1_task.html">cotask.Task</a></div><div class="ttdoc">Implements multitasking with scheduling and some performance logging.</div><div class="ttdef"><b>Definition</b> cotask.py:66</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2fe3b73c0ccc2cd20a89694e336291f5" name="a2fe3b73c0ccc2cd20a89694e336291f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe3b73c0ccc2cd20a89694e336291f5">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask.Task.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>run_fun</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;NoName&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>priority</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>period</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>profile</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>trace</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span><span class="paramdefsep"> = </span><span class="paramdefval">()</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a task object so it may be run by the scheduler. </p>
<p>This method initializes a task object, saving copies of constructor parameters and preparing an empty dictionary for states.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">run_fun</td><td>The function which implements the task's code. It must be a generator which yields the current state. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the task, by default <code>NoName</code>. This should be overridden with a more descriptive name by the programmer. </td></tr>
    <tr><td class="paramname">priority</td><td>The priority of the task, a positive integer with higher numbers meaning higher priority (default 0) </td></tr>
    <tr><td class="paramname">period</td><td>The time in milliseconds between runs of the task if it's run by a timer or <code>None</code> if the task is not run by a timer. The time can be given in a <code>float</code> or <code>int</code>; it will be converted to microseconds for internal use by the scheduler. </td></tr>
    <tr><td class="paramname">profile</td><td>Set to <code>True</code> to enable run-time profiling </td></tr>
    <tr><td class="paramname">trace</td><td>Set to <code>True</code> to generate a list of transitions between states. <b>Note:</b> This slows things down and allocates memory. </td></tr>
    <tr><td class="paramname">shares</td><td>A list or tuple of shares and queues used by this task. If no list is given, no shares are passed to the task </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2023e255766db032de255fd65c0b1943" name="a2023e255766db032de255fd65c0b1943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2023e255766db032de255fd65c0b1943">&#9670;&#160;</a></span>__repr__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask.Task.__repr__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method converts the task to a string for diagnostic use. </p>
<p>It shows information about the task, including execution time profiling results if profiling has been done. </p><dl class="section return"><dt>Returns</dt><dd>The string which represents the task </dd></dl>

</div>
</div>
<a id="a51c5df87e0e707f9e3c02d9765fcbee1" name="a51c5df87e0e707f9e3c02d9765fcbee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51c5df87e0e707f9e3c02d9765fcbee1">&#9670;&#160;</a></span>get_trace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask.Task.get_trace </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method returns a string containing the task's transition trace. </p>
<p>The trace is a set of tuples, each of which contains a time and the states from and to which the system transitioned. </p><dl class="section return"><dt>Returns</dt><dd>A possibly quite large string showing state transitions </dd></dl>

</div>
</div>
<a id="a8066da53e82716dc9f0495b28a89b781" name="a8066da53e82716dc9f0495b28a89b781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8066da53e82716dc9f0495b28a89b781">&#9670;&#160;</a></span>go()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask.Task.go </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to set a flag so that this task indicates that it's ready to run. </p>
<p>This method may be called from an interrupt service routine or from another task which has data that this task needs to process soon. </p>

</div>
</div>
<a id="a6102bc35d7cb1ce292abc85d4ddc23e1" name="a6102bc35d7cb1ce292abc85d4ddc23e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6102bc35d7cb1ce292abc85d4ddc23e1">&#9670;&#160;</a></span>ready()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bool cotask.Task.ready </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method checks if the task is ready to run. </p>
<p>If the task runs on a timer, this method checks what time it is; if not, this method checks the flag which indicates that the task is ready to go. This method may be overridden in descendent classes to implement some other behavior. </p>

</div>
</div>
<a id="a0fd4093dcd01cd1d05ace187956340cf" name="a0fd4093dcd01cd1d05ace187956340cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd4093dcd01cd1d05ace187956340cf">&#9670;&#160;</a></span>reset_profile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask.Task.reset_profile </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method resets the variables used for execution time profiling. </p>
<p>This method is also used by <code><a class="el" href="#a2fe3b73c0ccc2cd20a89694e336291f5" title="Initialize a task object so it may be run by the scheduler.">__init__()</a></code> to create the variables. </p>

</div>
</div>
<a id="af60def0ed4a1bc5fec32f3cf8b8a90c8" name="af60def0ed4a1bc5fec32f3cf8b8a90c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af60def0ed4a1bc5fec32f3cf8b8a90c8">&#9670;&#160;</a></span>schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bool cotask.Task.schedule </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method is called by the scheduler; it attempts to run this task. </p>
<p>If the task is not yet ready to run, this method returns <code>False</code> immediately; if this task is ready to run, it runs the task's generator up to the next <code>yield()</code> and then returns <code>True</code>.</p>
<dl class="section return"><dt>Returns</dt><dd><code>True</code> if the task ran or <code>False</code> if it did not </dd></dl>

</div>
</div>
<a id="a0fcee5beb8b2fed77e5125c58ba35c26" name="a0fcee5beb8b2fed77e5125c58ba35c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fcee5beb8b2fed77e5125c58ba35c26">&#9670;&#160;</a></span>set_period()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask.Task.set_period </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>new_period</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method sets the period between runs of the task to the given number of milliseconds, or <code>None</code> if the task is triggered by calls to <code><a class="el" href="#a8066da53e82716dc9f0495b28a89b781" title="Method to set a flag so that this task indicates that it&#39;s ready to run.">go()</a></code> rather than time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_period</td><td>The new period in milliseconds between task runs </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/juicy/Documents/GitHub/romi/<a class="el" href="cotask_8py.html">cotask.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>cotask</b></li><li class="navelem"><a class="el" href="classcotask_1_1_task.html">Task</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
