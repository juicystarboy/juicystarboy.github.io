\doxysection{task\+\_\+share.\+py}
\hypertarget{task__share_8py_source}{}\label{task__share_8py_source}\index{C:/Users/juicy/Documents/GitHub/romi/task\_share.py@{C:/Users/juicy/Documents/GitHub/romi/task\_share.py}}
\mbox{\hyperlink{task__share_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00001}\mbox{\hyperlink{namespacetask__share}{00001}}\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00024}00024\ \textcolor{keyword}{import}\ array}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00025}00025\ \textcolor{keyword}{import}\ gc}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00026}00026\ \textcolor{keyword}{import}\ pyb}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00027}00027\ \textcolor{keyword}{import}\ micropython}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00032}\mbox{\hyperlink{namespacetask__share_a75818e5b662453e3723d0f234c85e519}{00032}}\ share\_list\ =\ []}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00035}\mbox{\hyperlink{namespacetask__share_af5ee68a35f9ce19aef4c4bd4ab7c2679}{00035}}\ type\_code\_strings\ =\ \{\textcolor{stringliteral}{'b'}\ :\ \textcolor{stringliteral}{"{}int8"{}},\ \ \ \textcolor{stringliteral}{'B'}\ :\ \textcolor{stringliteral}{"{}uint8"{}},}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'h'}\ :\ \textcolor{stringliteral}{"{}int16"{}},\ \ \textcolor{stringliteral}{'H'}\ :\ \textcolor{stringliteral}{"{}uint16"{}},}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'i'}\ :\ \textcolor{stringliteral}{"{}int(?)"{}},\ \textcolor{stringliteral}{'I'}\ :\ \textcolor{stringliteral}{"{}uint(?)"{}},}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'l'}\ :\ \textcolor{stringliteral}{"{}int32"{}},\ \ \textcolor{stringliteral}{'L'}\ :\ \textcolor{stringliteral}{"{}uint32"{}},}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'q'}\ :\ \textcolor{stringliteral}{"{}int64"{}},\ \ \textcolor{stringliteral}{'Q'}\ :\ \textcolor{stringliteral}{"{}uint64"{}},}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'f'}\ :\ \textcolor{stringliteral}{"{}float"{}},\ \ \textcolor{stringliteral}{'d'}\ :\ \textcolor{stringliteral}{"{}double"{}}\}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00046}\mbox{\hyperlink{namespacetask__share_ad6aea1db68be1a10f72039a5ac9e9dd4}{00046}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacetask__share_ad6aea1db68be1a10f72039a5ac9e9dd4}{show\_all}}\ ():}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00047}00047\ \ \ \ \ gen\ =\ (str\ (item)\ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ share\_list)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00048}00048\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{'\(\backslash\)n'}.join\ (gen)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00056}\mbox{\hyperlink{classtask__share_1_1_base_share}{00056}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtask__share_1_1_base_share}{BaseShare}}:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00058}00058\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00061}\mbox{\hyperlink{classtask__share_1_1_base_share_ad8079b40800179be6c58aaac9abb0e26}{00061}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_base_share_ad8079b40800179be6c58aaac9abb0e26}{\_\_init\_\_}}\ (self,\ type\_code,\ thread\_protect\ =\ True,\ name\ =\ None):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00062}\mbox{\hyperlink{classtask__share_1_1_base_share_a0e45276424d1600740942b82f216c649}{00062}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_base_share_a0e45276424d1600740942b82f216c649}{\_type\_code}}\ =\ type\_code}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00063}\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{00063}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ =\ thread\_protect}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Add\ this\ queue\ to\ the\ global\ share\ and\ queue\ list}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ share\_list.append\ (self)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00090}\mbox{\hyperlink{classtask__share_1_1_queue}{00090}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtask__share_1_1_queue}{Queue}}\ (\mbox{\hyperlink{classtask__share_1_1_base_share}{BaseShare}}):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00092}00092\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00093}\mbox{\hyperlink{classtask__share_1_1_queue_a6f9d87b116eb16dba0867d3746af9f5f}{00093}}\ \ \ \ \ ser\_num\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00095}00095\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00120}\mbox{\hyperlink{classtask__share_1_1_queue_a74a2bf942ef1d70302551900c16af635}{00120}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_a74a2bf942ef1d70302551900c16af635}{\_\_init\_\_}}\ (self,\ type\_code,\ size,\ thread\_protect\ =\ False,\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ overwrite\ =\ False,\ name\ =\ None):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ First\ call\ the\ parent\ class\ initializer}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ super\ ().\_\_init\_\_\ (type\_code,\ thread\_protect,\ name)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00125}\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{00125}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{\_size}}\ =\ size}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00126}\mbox{\hyperlink{classtask__share_1_1_queue_af15a266174233221505d2abf8fef7e95}{00126}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_af15a266174233221505d2abf8fef7e95}{\_overwrite}}\ =\ overwrite}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00127}\mbox{\hyperlink{classtask__share_1_1_queue_a5b343508c95c7cc8ee37992cf7d286ca}{00127}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_a5b343508c95c7cc8ee37992cf7d286ca}{\_name}}\ =\ str\ (name)\ \textcolor{keywordflow}{if}\ name\ !=\ \textcolor{keywordtype}{None}\ \(\backslash\)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{'Queue'}\ +\ str\ (Queue.ser\_num)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ Queue.ser\_num\ +=\ 1}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00130}00130\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Allocate\ memory\ in\ which\ the\ queue's\ data\ will\ be\ stored}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00133}\mbox{\hyperlink{classtask__share_1_1_queue_ad1e2a4a6b081dd65989ce7af29610abe}{00133}}\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad1e2a4a6b081dd65989ce7af29610abe}{\_buffer}}\ =\ array.array\ (type\_code,\ range\ (size))}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ MemoryError:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad1e2a4a6b081dd65989ce7af29610abe}{\_buffer}}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00137}00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad1e2a4a6b081dd65989ce7af29610abe}{\_buffer}}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Initialize\ pointers\ to\ be\ used\ for\ reading\ and\ writing\ data}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_a0d4b70d239eb7244ff3b7e54d4a4981e}{clear}}\ ()}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00144}00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Since\ we\ may\ have\ allocated\ a\ bunch\ of\ memory,\ call\ the\ garbage}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ collector\ to\ neaten\ up\ what\ memory\ is\ left\ for\ future\ use}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00146}00146\ \ \ \ \ \ \ \ \ gc.collect\ ()}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00147}00147\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00148}00148\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00149}00149\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00167}00167\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00168}\mbox{\hyperlink{classtask__share_1_1_queue_a0611b4838abb13731d1d487a8178b883}{00168}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_a0611b4838abb13731d1d487a8178b883}{put}}\ (self,\ item,\ in\_ISR\ =\ False):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ we're\ in\ an\ ISR\ and\ the\ queue\ is\ full\ and\ we're\ not\ allowed\ to}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ overwrite\ data,\ we\ have\ to\ give\ up\ and\ exit}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_a72be18f8267b2977117eedf15ad896c8}{full}}\ ():}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Wait\ (if\ needed)\ until\ there's\ room\ in\ the\ buffer\ for\ the\ data}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_af15a266174233221505d2abf8fef7e95}{\_overwrite}}:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_a72be18f8267b2977117eedf15ad896c8}{full}}\ ():}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00179}00179\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Prevent\ data\ corruption\ by\ blocking\ interrupts\ during\ data\ transfer}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \_irq\_state\ =\ pyb.disable\_irq\ ()}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Write\ the\ data\ and\ advance\ the\ counts\ and\ pointers}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad1e2a4a6b081dd65989ce7af29610abe}{\_buffer}}[self.\mbox{\hyperlink{classtask__share_1_1_queue_addb876a457d389d6110a1667c05c4ae3}{\_wr\_idx}}]\ =\ item}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_addb876a457d389d6110a1667c05c4ae3}{\_wr\_idx}}\ +=\ 1}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00187}00187\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_addb876a457d389d6110a1667c05c4ae3}{\_wr\_idx}}\ >=\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{\_size}}:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00188}\mbox{\hyperlink{classtask__share_1_1_queue_addb876a457d389d6110a1667c05c4ae3}{00188}}\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_addb876a457d389d6110a1667c05c4ae3}{\_wr\_idx}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ +=\ 1}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00190}00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ >=\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{\_size}}:\ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Can't\ be\ fuller\ than\ full}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00191}\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{00191}}\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ =\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{\_size}}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00192}\mbox{\hyperlink{classtask__share_1_1_queue_a6b3d9887cdd99611f3288c7983581dfd}{00192}}\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ >\ self.\mbox{\hyperlink{classtask__share_1_1_queue_a6b3d9887cdd99611f3288c7983581dfd}{\_max\_full}}:\ \ \ \ \ \textcolor{comment}{\#\ Record\ maximum\ fillage}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_a6b3d9887cdd99611f3288c7983581dfd}{\_max\_full}}\ =\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Re-\/enable\ interrupts}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ pyb.enable\_irq\ (\_irq\_state)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00198}00198\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00200}00200\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00217}00217\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00218}\mbox{\hyperlink{classtask__share_1_1_queue_a6fec4a9775651c30a4c6de357eb701fc}{00218}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_a6fec4a9775651c30a4c6de357eb701fc}{get}}\ (self,\ in\_ISR\ =\ False):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Wait\ until\ there's\ something\ in\ the\ queue\ to\ be\ returned}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_afee296230d2346df88ffb4b2b22208f3}{empty}}\ ():}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00222}00222\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00223}00223\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Prevent\ data\ corruption\ by\ blocking\ interrupts\ during\ data\ transfer}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00224}00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ irq\_state\ =\ pyb.disable\_irq\ ()}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00226}00226\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Get\ the\ item\ to\ be\ returned\ from\ the\ queue}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00228}00228\ \ \ \ \ \ \ \ \ to\_return\ =\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad1e2a4a6b081dd65989ce7af29610abe}{\_buffer}}[self.\mbox{\hyperlink{classtask__share_1_1_queue_a846a649a41a37dc094cad4c28ec9170f}{\_rd\_idx}}]}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Move\ the\ read\ pointer\ and\ adjust\ the\ number\ of\ items\ in\ the\ queue}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00231}00231\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_a846a649a41a37dc094cad4c28ec9170f}{\_rd\_idx}}\ +=\ 1}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_a846a649a41a37dc094cad4c28ec9170f}{\_rd\_idx}}\ >=\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{\_size}}:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00233}\mbox{\hyperlink{classtask__share_1_1_queue_a846a649a41a37dc094cad4c28ec9170f}{00233}}\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_a846a649a41a37dc094cad4c28ec9170f}{\_rd\_idx}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ -\/=\ 1}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ <\ 0:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00237}00237\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00238}00238\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Re-\/enable\ interrupts}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00239}00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ pyb.enable\_irq\ (irq\_state)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (to\_return)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00243}00243\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00245}00245\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00250}00250\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00251}\mbox{\hyperlink{classtask__share_1_1_queue_ac9552672266377c23011552e9df15a63}{00251}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_ac9552672266377c23011552e9df15a63}{any}}\ (self):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00252}00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ >\ 0)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00253}00253\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00254}00254\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00255}00255\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00260}00260\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00261}\mbox{\hyperlink{classtask__share_1_1_queue_afee296230d2346df88ffb4b2b22208f3}{00261}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_afee296230d2346df88ffb4b2b22208f3}{empty}}\ (self):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ <=\ 0)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00263}00263\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00264}00264\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00265}00265\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00270}00270\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00271}\mbox{\hyperlink{classtask__share_1_1_queue_a72be18f8267b2977117eedf15ad896c8}{00271}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_a72be18f8267b2977117eedf15ad896c8}{full}}\ (self):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00272}00272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ >=\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{\_size}})}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00273}00273\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00274}00274\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00275}00275\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00280}00280\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00281}\mbox{\hyperlink{classtask__share_1_1_queue_aef595fc4133d297e2b63014c47ac5f27}{00281}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_aef595fc4133d297e2b63014c47ac5f27}{num\_in}}\ (self):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00282}00282\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}})}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00283}00283\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00284}00284\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00285}00285\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00286}\mbox{\hyperlink{classtask__share_1_1_queue_a0d4b70d239eb7244ff3b7e54d4a4981e}{00286}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_a0d4b70d239eb7244ff3b7e54d4a4981e}{clear}}\ (self):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00287}00287\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_a846a649a41a37dc094cad4c28ec9170f}{\_rd\_idx}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00288}00288\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_addb876a457d389d6110a1667c05c4ae3}{\_wr\_idx}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00289}00289\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_ab8dd2af644d6f30db1ce798708bbfbf7}{\_num\_items}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00290}00290\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_queue_a6b3d9887cdd99611f3288c7983581dfd}{\_max\_full}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00291}00291\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00293}00293\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00297}\mbox{\hyperlink{classtask__share_1_1_queue_a7b9626a0859625dbcf6d964b8b5c7761}{00297}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_queue_a7b9626a0859625dbcf6d964b8b5c7761}{\_\_repr\_\_}}\ (self):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00298}00298\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{stringliteral}{'\{:<12s\}\ Queue<\{:s\}>\ Max\ Full\ \{:d\}/\{:d\}'}.format\ (self.\mbox{\hyperlink{classtask__share_1_1_queue_a5b343508c95c7cc8ee37992cf7d286ca}{\_name}},}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00299}00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ type\_code\_strings[self.\mbox{\hyperlink{classtask__share_1_1_base_share_a0e45276424d1600740942b82f216c649}{\_type\_code}}],\ self.\mbox{\hyperlink{classtask__share_1_1_queue_a6b3d9887cdd99611f3288c7983581dfd}{\_max\_full}},\ self.\mbox{\hyperlink{classtask__share_1_1_queue_ad256c3ac46d8ad097b921c8d448b1b96}{\_size}}))}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00300}00300\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00301}00301\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00302}00302\ \textcolor{comment}{\#\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00303}00303\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00304}00304\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00324}\mbox{\hyperlink{classtask__share_1_1_share}{00324}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtask__share_1_1_share}{Share}}\ (\mbox{\hyperlink{classtask__share_1_1_base_share}{BaseShare}}):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00325}00325\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00326}00326\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00327}\mbox{\hyperlink{classtask__share_1_1_share_a2e8df029af46fbfd44ef0c2e7e8c7af6}{00327}}\ \ \ \ \ ser\_num\ =\ 0}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00328}00328\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00329}00329\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00330}00330\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00351}\mbox{\hyperlink{classtask__share_1_1_share_ad8263aa134dc9fa17abb7f751240f092}{00351}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_share_ad8263aa134dc9fa17abb7f751240f092}{\_\_init\_\_}}\ (self,\ type\_code,\ thread\_protect\ =\ True,\ name\ =\ None):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ First\ call\ the\ parent\ class\ initializer}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ super\ ().\_\_init\_\_\ (type\_code,\ thread\_protect,\ name)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00354}00354\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00355}\mbox{\hyperlink{classtask__share_1_1_share_a2f7e0b72d08d27b7ccf92da6ddc127a8}{00355}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_share_a2f7e0b72d08d27b7ccf92da6ddc127a8}{\_buffer}}\ =\ array.array\ (type\_code,\ [0])}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00356}00356\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00357}\mbox{\hyperlink{classtask__share_1_1_share_acff3918997966ba1e31292398f3ca196}{00357}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_share_acff3918997966ba1e31292398f3ca196}{\_name}}\ =\ str\ (name)\ \textcolor{keywordflow}{if}\ name\ !=\ \textcolor{keywordtype}{None}\ \(\backslash\)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{'Share'}\ +\ str\ (Share.ser\_num)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ Share.ser\_num\ +=\ 1}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00360}00360\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00361}00361\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00362}00362\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00370}00370\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00371}\mbox{\hyperlink{classtask__share_1_1_share_a6bca473510fc2d28f5b7a32f242e4e18}{00371}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_share_a6bca473510fc2d28f5b7a32f242e4e18}{put}}\ (self,\ data,\ in\_ISR\ =\ False):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00372}00372\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00373}00373\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Disable\ interrupts\ before\ writing\ the\ data}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ irq\_state\ =\ pyb.disable\_irq\ ()}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00376}00376\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00377}00377\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classtask__share_1_1_share_a2f7e0b72d08d27b7ccf92da6ddc127a8}{\_buffer}}[0]\ =\ data}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00378}00378\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00379}00379\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Re-\/enable\ interrupts}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00381}00381\ \ \ \ \ \ \ \ \ \ \ \ \ pyb.enable\_irq\ (irq\_state)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00382}00382\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00383}00383\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00384}00384\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00390}00390\ \ \ \ \ \textcolor{preprocessor}{@micropython.native}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00391}\mbox{\hyperlink{classtask__share_1_1_share_ae5e4a0e21b274c9a76b80b8bb5eb62d3}{00391}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_share_ae5e4a0e21b274c9a76b80b8bb5eb62d3}{get}}\ (self,\ in\_ISR\ =\ False):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Disable\ interrupts\ before\ reading\ the\ data}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00394}00394\ \ \ \ \ \ \ \ \ \ \ \ \ irq\_state\ =\ pyb.disable\_irq\ ()}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00395}00395\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00396}00396\ \ \ \ \ \ \ \ \ to\_return\ =\ self.\mbox{\hyperlink{classtask__share_1_1_share_a2f7e0b72d08d27b7ccf92da6ddc127a8}{\_buffer}}[0]}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00397}00397\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00398}00398\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Re-\/enable\ interrupts}}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00399}00399\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classtask__share_1_1_base_share_acf1741d88ede8f82b9c5f321a92aaa5e}{\_thread\_protect}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ in\_ISR:}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00400}00400\ \ \ \ \ \ \ \ \ \ \ \ \ pyb.enable\_irq\ (irq\_state)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00401}00401\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00402}00402\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (to\_return)}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00403}00403\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00404}00404\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00405}00405\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00408}\mbox{\hyperlink{classtask__share_1_1_share_ae764d854ffc31037a37f89211128eb98}{00408}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classtask__share_1_1_share_ae764d854ffc31037a37f89211128eb98}{\_\_repr\_\_}}\ (self):}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00409}00409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{stringliteral}{"{}\{:<12s\}\ Share<\{:s\}>"{}}.format\ (self.\mbox{\hyperlink{classtask__share_1_1_share_acff3918997966ba1e31292398f3ca196}{\_name}},}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00410}00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ type\_code\_strings[self.\mbox{\hyperlink{classtask__share_1_1_base_share_a0e45276424d1600740942b82f216c649}{\_type\_code}}]))}
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00411}00411\ }
\DoxyCodeLine{\Hypertarget{task__share_8py_source_l00412}00412\ }

\end{DoxyCode}
